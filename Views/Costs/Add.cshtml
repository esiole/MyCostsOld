@model AddCost
@{
    ViewBag.Title = "Добавление расходов";
}

<form asp-action="Add">
    <div class="form-group" hidden>
        <input type="text" name="userName" value="@User.Identity.Name" class="form-control" />
    </div>
    <div class="form-group">
        <label name="categoryId" class="control-label">Название категории</label>
        <select name="categoryId" asp-items="Model.Categories" class="form-control" id="categories"></select>
    </div>
    <div class="form-group">
        <label asp-for="Cost.ProductId" class="control-label">Название продукта</label>
        <select asp-for="Cost.ProductId" asp-items="Model.Products" class="form-control" id="products"></select>
    </div>
    <div class="form-group">
        <label name="sum" class="control-label">Цена</label>
        <input name="sum" type="number" min="0" step="0.01" class="form-control" />
    </div>
    <div class="form-group">
        <label asp-for="Cost.Store" class="control-label">Магазин</label>
        <input type="text" asp-for="Cost.Store" class="form-control" id="storeInput"/>
    </div>
    <div class="form-group">
        <label asp-for="Cost.Date" class="control-label">Дата</label>
        <input type="date" asp-for="Cost.Date" class="form-control" />
    </div>
    <div class="form-group">
        <label asp-for="Cost.Count" class="control-label">Количество</label>
        <input type="number" min="0" asp-for="Cost.Count" value="1" class="form-control" />
    </div>
    <div class="form-group">
        <label name="weight" class="control-label">Вес (в килограммах)</label>
        <input name="weight" type="number" min="0" step="0.001" class="form-control" />
    </div>
    <div class="form-group">
        <input type="submit" value="Добавить" class="btn btn-default" id="submitCost"/>
    </div>
</form>

@section scripts{
    <script type="text/javascript">
        $(function () {
            $('#categories').change(function () {
                var id = $(this).val();
                $.ajax({
                    type: 'GET',
                    url: '@Url.Action("GetProductsOfACategory")/' + id,
                    success: function (data) {
                        $('#products').replaceWith(data);
                    }
                });
            });
        });
    </script>
}
